# Инструкции для Claude Code

## Структура проекта

### Папка DEV - Организация файлов разработки

Папка `dev/` имеет четкую структуру для организации всех файлов разработки:

#### `dev/tests/` - Тестовые файлы
ВСЕГДА размещайте тестовые файлы в этой папке:
- `test_*.py` - тесты функциональности
- `check_*.py` - проверки и диагностика
- `debug_*.py` - скрипты отладки
- Примеры: `test_bybit_parser.py`, `check_db.py`, `debug_staking_tags.py`

#### `dev/todos/` - TODO листы
ВСЕГДА размещайте TODO файлы в этой папке:
- `TODO_*.md` - списки задач по функциональности
- Примеры: `TODO_MASTER.md`, `TODO_UI_FIXES.md`, `TODO_TELEGRAM_FALLBACK.md`
- При создании нового TODO листа ОБЯЗАТЕЛЬНО сохраняйте его в `dev/todos/`

#### `dev/docs/` - Документация разработки
Техническая документация и отчеты:
- `*.md` файлы с описанием реализации
- Руководства по тестированию
- Отчеты о решенных проблемах
- Примеры: `PHASE3_README.md`, `TESTING_GUIDE.md`, `SOLUTION_REPORT.md`

#### `dev/test_data/` - Тестовые данные
Файлы данных для тестирования:
- `*.json` - JSON ответы от API
- `*.html` - HTML страницы для парсинга
- `*.txt` - текстовые данные
- Примеры: `bybit_api_response.json`, `mexc_output.html`

#### `dev/scripts/` - Утилиты и скрипты
Вспомогательные скрипты для разработки:
- `add_*.py`, `setup_*.py` - скрипты настройки
- `clear_*.py`, `delete_*.py` - скрипты очистки
- `fix_*.py`, `update_*.py` - скрипты миграции
- `build_*.py`, `find_*.py` - утилиты генерации
- Примеры: `setup_telegram_api.py`, `migration.py`, `fix_session_paths.py`

### Папка sessions
Все файлы сессий Telegram (*.session, *.session-journal) должны храниться в папке `sessions/`:
- Файлы создаются автоматически при авторизации
- Папка исключена из git через .gitignore
- В коде используются пути вида `sessions/имя_сессии`

## Правила создания файлов

### ОБЯЗАТЕЛЬНЫЕ правила размещения файлов

#### Тестовые файлы → `dev/tests/`
- При создании новых тестовых файлов ВСЕГДА размещайте их в `dev/tests/`
- НЕ создавайте тестовые файлы в корне проекта или в корне `dev/`
- Форматы: `test_*.py`, `check_*.py`, `debug_*.py`
- Пример: `dev/tests/test_new_feature.py`

#### TODO листы → `dev/todos/`
- При создании TODO листа ВСЕГДА сохраняйте в `dev/todos/`
- Формат: `TODO_*.md`
- Пример: `dev/todos/TODO_NEW_FEATURE.md`
- Claude ОБЯЗАН использовать эту папку для всех TODO файлов

#### Документация → `dev/docs/`
- Техническая документация, отчеты, руководства
- Форматы: `*.md`, `*.txt`
- Пример: `dev/docs/IMPLEMENTATION_GUIDE.md`

#### Тестовые данные → `dev/test_data/`
- JSON ответы от API, HTML страницы, примеры данных
- Форматы: `*.json`, `*.html`, `*.txt`
- Пример: `dev/test_data/api_response_example.json`

#### Скрипты разработки → `dev/scripts/`
- Утилиты, скрипты настройки, миграции
- Форматы: `add_*.py`, `setup_*.py`, `fix_*.py`, `migration.py`
- Пример: `dev/scripts/setup_new_feature.py`

### Исключения
В корне проекта должны находиться только:
- `main.py` - основной файл запуска
- `config.py` - конфигурация проекта
- Модули производственного кода (bot/, parsers/, data/, utils/, services/)
- Документация (README.md, SETUP.md и т.д.)

### КРИТИЧЕСКИ ВАЖНО: Защищенные производственные файлы
Следующие файлы в корне проекта являются ПРОИЗВОДСТВЕННЫМИ модулями и НЕ ДОЛЖНЫ перемещаться в dev/:
- **`bybit_coin_mapping.py`** - маппинг монет Bybit для стейкинг-парсера (используется в parsers/staking_parser.py)
- **`main.py`** - точка входа приложения
- **`config.py`** - конфигурация проекта

НИКОГДА не перемещайте эти файлы в dev/. Они необходимы для работы бота!

## Работа с сессиями Telegram
- Все новые сессии создаются с префиксом пути `sessions/`
- Пример: `sessions/tg_session_12345_79001234567`
- Не храните файлы сессий в корне проекта
- При миграции старых сессий перемещайте их в `sessions/`
