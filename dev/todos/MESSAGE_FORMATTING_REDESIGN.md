# 📋 TODO: Редизайн форматирования сообщений о промоакциях

## 📅 Создано: 2026-01-22
## 🎯 Цель: Создать уникальное, информативное и красивое форматирование для каждой категории и подкатегории промоакций

---

## 📊 ТЕКУЩАЯ СТРУКТУРА ФОРМАТИРОВАНИЯ

### Основные файлы:
- `bot/notification_service.py` - основной сервис с методами форматирования
- `utils/promo_formatter.py` - универсальный форматтер заголовков

### Текущие категории:
1. **LAUNCHPAD** - продажа токенов (MEXC, Gate, Bybit)
2. **LAUNCHPOOL** - фарминг токенов (Bybit, Gate, Bitget, OKX)
3. **AIRDROP** - раздача токенов (MEXC, Weex, OKX)
4. **STAKING** - стейкинг (Binance, Gate, Kucoin, OKX)
5. **CANDY** - лотереи/конкурсы (Gate)
6. **BOOST** - бусты X-Launch (OKX)
7. **REWARDS** - общие награды (Weex)
8. **TELEGRAM** - парсинг каналов

---

## 🎨 НОВОЕ ФОРМАТИРОВАНИЕ ПО КАТЕГОРИЯМ

### ═══════════════════════════════════════════════════════════════
### 1️⃣ LAUNCHPAD (Продажа токенов)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Акцент на инвестиционную привлекательность, скидку, ROI

```
🚀━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   MEXC LAUNCHPAD │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🪙 SEEKER (SKR)
   └─ Децентрализованная платформа...

💰 УСЛОВИЯ ПОКУПКИ:
   ┌──────────────────────────────┐
   │ 💵 Цена:    $0.005 (70% OFF) │
   │ 📊 Рынок:   ~$0.015          │
   │ 📈 ROI:     +200%            │
   └──────────────────────────────┘

📦 АЛЛОКАЦИЯ:
   • Всего токенов: 3,000,000 SKR
   • Валюта покупки: USDT
   • Мин. участие: 100 USDT
   • Макс. участие: 10,000 USDT

👥 СТАТИСТИКА:
   • Участников: 111
   • Собрано: $73,835 / $150,000
   • Заполнено: ▓▓▓▓▓▓▓░░░░░ 49%

⏰ ПЕРИОД:
   • 19.01 04:00 → 21.01 04:00 UTC
   • Осталось: 1д 12ч 30м

🔗 mexc.com/launchpad/44
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: mexc_launchpad_44
```

**Ключевые элементы:**
- [ ] Блок условий покупки с ROI
- [ ] Прогресс-бар заполнения
- [ ] Расчёт потенциальной прибыли
- [ ] Обратный отсчёт до конца
- [ ] Визуальные рамки для важной информации

---

### ═══════════════════════════════════════════════════════════════
### 2️⃣ LAUNCHPOOL (Фарминг токенов)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Акцент на APR, пулы стейкинга, расчёт дохода

```
🌊━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   BYBIT LAUNCHPOOL │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🪙 NEWTOKEN (NTKN) 
   └─ Инновационная DeFi платформа

🏆 ПУЛЫ ДЛЯ ФАРМИНГА:

┌─ ПУЛ #1: USDT ─────────────────────
│ 📈 APR: 150% 🔥
│ 🔒 Макс: 10,000 USDT ($10,000)
│ 
│ 💵 РАСЧЁТ ДОХОДА (7 дней):
│    ├─ $1,000  → +$28.77 
│    ├─ $5,000  → +$143.84
│    └─ $10,000 → +$287.67 ⭐
└────────────────────────────────────

┌─ ПУЛ #2: BTC ──────────────────────
│ 📈 APR: 80%
│ 🔒 Макс: 0.5 BTC (~$52,000)
│ 
│ 💵 РАСЧЁТ ДОХОДА (7 дней):
│    ├─ 0.1 BTC  → +$159.45
│    ├─ 0.25 BTC → +$398.63
│    └─ 0.5 BTC  → +$797.26 ⭐
└────────────────────────────────────

🎁 ОБЩИЙ ПУЛ: 5,000,000 NTKN (~$250,000)

⏰ ПЕРИОД:
   • Старт: 20.01 12:00 UTC
   • Конец: 27.01 12:00 UTC
   • Осталось: 6д 18ч

🔗 https://www.bybit.com/en/trade/spot/launchpool
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: bybit_launchpool_123
```

**Ключевые элементы:**
- [ ] Визуальные карточки для каждого пула
- [ ] Расчёт дохода для разных сумм
- [ ] Маркер 🔥 для лучшего APR
- [ ] Маркер ⭐ для максимальной суммы
- [ ] Конвертация в USD

---

### ═══════════════════════════════════════════════════════════════
### 3️⃣ AIRDROP (Раздача токенов)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Акцент на бесплатность, условия участия, шанс на выигрыш

```
🪂━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   MEXC AIRDROP │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎁 COCO BSC AIRDROP
   └─ Бесплатная раздача токенов!

💎 ПРИЗОВОЙ ФОНД:
   ┌──────────────────────────────┐
   │ 🪙 500,000 COCO (~$25,000)   │
   │ 💵 +25,000 USDT бонус        │
   │ ═══════════════════════════  │
   │ 💰 ИТОГО: ~$50,000           │
   └──────────────────────────────┘

📊 ШАНСЫ НА ПОБЕДУ:
   • Призовых мест: 21,476
   • Участников: 15,832
   • Коэфф.: 1.4x (больше мест чем людей!)
   • Статус: 🟢 Высокий шанс

🎯 УСЛОВИЯ:
   • ✅ Для всех пользователей
   • 📝 Выполнить задания
   • 💳 Пополнить счёт

⏰ ПЕРИОД:
   • 13.01 → 20.01.2026
   • Осталось: 2д 8ч

🔗 mexc.com/token-airdrop/3159
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: mexc_airdrop_3159
```

**Ключевые элементы:**
- [ ] Яркий блок с призовым фондом
- [ ] Расчёт шансов на победу
- [ ] Визуальный индикатор шансов (🟢🟡🔴)
- [ ] Список условий участия
- [ ] Пометка "Бесплатно"

---

### ═══════════════════════════════════════════════════════════════
### 4️⃣ STAKING (Стейкинг)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Акцент на доходность, надёжность, сроки

```
💎━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   BINANCE STAKING │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🪙 ETHEREUM (ETH)
   └─ Гибкий стейкинг с высоким APR

┌─────────────────────────────────────┐
│  📈 APR: 4.5%     ⏱ Flexible       │
│  💵 Цена: $3,245  🏦 Binance       │
└─────────────────────────────────────┘

💰 РАСЧЁТ ДОХОДА:
   ┌────────────────────────────────┐
   │ Депозит │  В день  │  В месяц │
   │─────────┼──────────┼──────────│
   │ 1 ETH   │  $0.40   │  $12.16  │
   │ 5 ETH   │  $1.99   │  $60.79  │
   │ 10 ETH  │  $3.99   │ $121.58  │
   └────────────────────────────────┘

📊 ДОСТУПНОСТЬ:
   ▓▓▓▓▓▓▓▓░░░░░░░░░░░░ 42%
   • Свободно: 58% пула
   • Статус: 🟢 Доступен

👤 ЛИМИТЫ:
   • Мин: 0.01 ETH (~$32)
   • Макс: 100 ETH (~$324,500)

🔗 binance.com/earn/eth
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: binance_staking_eth_flex
```

**Подкатегории стейкинга:**

#### 4.1 Flexible (Гибкий)
- [ ] Акцент на "доход в день"
- [ ] Возможность вывода в любой момент

#### 4.2 Fixed (Фиксированный)
```
🔒━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   GATE FIXED STAKING │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🪙 DOGE │ 30 дней │ APR: 25%

💰 ГАРАНТИРОВАННЫЙ ДОХОД:
   ┌────────────────────────────────┐
   │ Депозит    │ Доход за 30 дней │
   │────────────┼──────────────────│
   │ 10,000 DOGE│ +205 DOGE ($16)  │
   │ 50,000 DOGE│ +1,027 DOGE ($82)│
   │ 100K DOGE  │ +2,054 DOGE($164)│
   └────────────────────────────────┘

⚠️ Средства заблокированы на 30 дней
✅ Гарантированная выплата по окончании
```

#### 4.3 Dual Investment
```
🔄━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   BINANCE DUAL │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔄 USDC → SUI │ 7 дней │ APR: 180%

📈 СЦЕНАРИИ:
   ┌─────────────────────────────────┐
   │ Если SUI ≥ $4.50 (target):     │
   │   Получите USDC + 3.45% дохода │
   │                                 │
   │ Если SUI < $4.50:              │
   │   Получите SUI + 3.45% дохода  │
   └─────────────────────────────────┘

💵 Target Price: $4.50
📊 Текущая цена SUI: $4.25

```

---

### ═══════════════════════════════════════════════════════════════
### 5️⃣ CANDY / LOTTERY (Лотереи)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Игровой, азартный стиль

```
🍬━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   GATE CANDY DROP │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎰 WIN UP TO 3 SOL!
   └─ Бесплатная лотерея

🎁 ПРИЗЫ:
   ╔═══════════════════════════════╗
   ║  🥇 1st: 3 SOL (~$450)        ║
   ║  🥈 2nd: 1 SOL (~$150)        ║
   ║  🥉 3rd: 0.5 SOL (~$75)       ║
   ║  🎖️ 4-100: 0.1 SOL (~$15)    ║
   ╚═══════════════════════════════╝

📊 СТАТИСТИКА:
   • Призовой пул: 600 SOL (~$90,000)
   • Участников: 46,989
   • Шанс на приз: 1 к 470

🎲 УЧАСТИЕ: Бесплатно!

🔗 gate.com/candy-drop/SOL-247
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: gate.io_247
```

**Ключевые элементы:**
- [ ] Яркий игровой стиль
- [ ] Призовая таблица
- [ ] Расчёт шансов
- [ ] Акцент на "бесплатно"

---

### ═══════════════════════════════════════════════════════════════
### 6️⃣ BOOST / X-LAUNCH (OKX)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Социальный буст, награды за активность

```
📈━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   OKX BOOST │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🚀 PERPSTOCK X LAUNCH
   └─ Децентрализованная торговля акциями

💎 ПРИЗОВОЙ ФОНД: 
   1,500,000 STOCK (~$750,000)

📊 АКТИВНОСТЬ:
   • Участников: 20,883
   • Boost points: 2.5M+
   • Ваш буст: влияет на награду

🎯 КАК УЧАСТВОВАТЬ:
   1. Подписаться на X (Twitter)
   2. Сделать ретвит
   3. Накопить Boost Points
   4. Получить награду пропорционально

⏰ ПЕРИОД:
   • 17.01 → 02.02.2026
   • Осталось: 11д 5ч

🔗 okx.com/boost/perpstock
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: okx_boost_446
```

---

### ═══════════════════════════════════════════════════════════════
### 7️⃣ REWARDS (Общие награды)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Универсальный формат для разных акций

```
🎁━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   WEEX REWARDS │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📌 WE-LAUNCH PROGRAM
   └─ Hold 300 WXT, get free weekly airdrops

🎯 УСЛОВИЯ:
   • Держать ≥300 WXT на балансе
   • Получать еженедельные airdrop
   • Без дополнительных действий

💰 НАГРАДЫ:
   • Тип: Еженедельные airdrops
   • Валюта: Различные токены
   • Сумма: Зависит от баланса WXT

⏰ ПЕРИОД:
   • 09.01.2026 → 12.03.2029
   • Долгосрочная программа

🔗 weex.com/we-launch
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: weex_rewards_618415b7a9d1
```

---

### ═══════════════════════════════════════════════════════════════
### 8️⃣ TELEGRAM (Парсинг каналов)
### ═══════════════════════════════════════════════════════════════

**Концепция:** Компактный, быстрый просмотр

```
📢━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   TELEGRAM ALERT │ 🆕 NEW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📱 Канал: @binance_news

🔑 Найденные слова:
   airdrop, staking, launch

📝 Превью сообщения:
   "🚀 New staking opportunity! 
   Earn up to 50% APR on..."

📅 Время: 22.01.2026 14:30

🔗 t.me/binance_news/12345
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ID: telegram_binance_12345
```

---

## 📝 ПЛАН ВНЕДРЕНИЯ

### Фаза 1: Подготовка (1-2 дня)
- [ ] Создать новый модуль `utils/message_formatters.py`
- [ ] Определить базовые стили и константы
- [ ] Создать хелперы для ASCII-рамок и таблиц

### Фаза 2: Новые форматтеры (3-5 дней)
- [ ] `format_launchpad_message()` - Launchpad
- [ ] `format_launchpool_message()` - Launchpool  
- [ ] `format_airdrop_message()` - Airdrop
- [ ] `format_staking_message()` - Staking (+ подвиды)
- [ ] `format_candy_message()` - Candy/Lottery
- [ ] `format_boost_message()` - Boost/X-Launch
- [ ] `format_rewards_message()` - General Rewards
- [ ] `format_telegram_alert()` - Telegram

### Фаза 3: Интеграция (2-3 дня)
- [ ] Обновить `notification_service.py`
- [ ] Роутинг по типу промоакции
- [ ] Тестирование на реальных данных

### Фаза 4: Оптимизация (1-2 дня)
- [ ] Проверка лимита 4096 символов
- [ ] Fallback для обрезки
- [ ] A/B тестирование форматов

---

## 🔧 ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ

### Константы стилей:
```python
# Разделители
DIVIDER_THICK = "━" * 36
DIVIDER_THIN = "─" * 36

# Иконки категорий
ICONS = {
    'launchpad': '🚀',
    'launchpool': '🌊',
    'airdrop': '🪂',
    'staking': '💎',
    'candy': '🍬',
    'boost': '📈',
    'rewards': '🎁',
    'telegram': '📢',
}

# Цветные индикаторы
STATUS_COLORS = {
    'high': '🟢',
    'medium': '🟡', 
    'low': '🔴',
}
```

### Функции-хелперы:
```python
def create_box(lines: List[str], style='single') -> str
def create_table(headers: List[str], rows: List[List[str]]) -> str
def create_progress_bar(percent: float, width: int = 20) -> str
def format_countdown(end_time: datetime) -> str
def format_money(amount: float, currency: str = 'USD') -> str
```

---

## ✅ КРИТЕРИИ ПРИЁМКИ

1. Каждая категория имеет уникальный визуальный стиль
2. Все сообщения ≤ 4000 символов (с запасом)
3. Корректный HTML для Telegram
4. Конвертация сумм в USD где возможно
5. Расчёт доходности/шансов где применимо
6. Обратный отсчёт до окончания акции
7. Визуальные прогресс-бары для заполненности
8. Fallback если данные отсутствуют

---

## 📌 ПРИОРИТЕТЫ

1. 🔴 **HIGH**: Launchpad, Airdrop, Staking - основные категории
2. 🟡 **MEDIUM**: Launchpool, Candy, Boost
3. 🟢 **LOW**: Rewards, Telegram

---

## 📎 СВЯЗАННЫЕ ФАЙЛЫ

- `bot/notification_service.py` - текущий сервис
- `utils/promo_formatter.py` - текущий форматтер заголовков
- `data/models.py` - модели данных
- `parsers/*.py` - парсеры данных

